!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).zephrBrowser={})}(this,function(e){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){var t={exports:{}};return e(t,t.exports),t.exports}var r,o,i=function(e){return e&&e.Math==Math&&e},c=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t&&t)||function(){return this}()||Function("return this")(),a=function(e){try{return!!e()}catch(e){return!0}},u=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),s=function(e){return"object"==typeof e?null!==e:"function"==typeof e},f=c.document,l=s(f)&&s(f.createElement),p=function(e){return l?f.createElement(e):{}},d=!u&&!a(function(){return 7!=Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a}),h=function(e){if(!s(e))throw TypeError(String(e)+" is not an object");return e},v=function(e,t){if(!s(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!s(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!s(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!s(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},m=Object.defineProperty,y={f:u?m:function(e,t,n){if(h(e),t=v(t,!0),h(n),d)try{return m(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},g=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},b=u?function(e,t,n){return y.f(e,t,g(1,n))}:function(e,t,n){return e[t]=n,e},w=function(e,t){try{b(c,e,t)}catch(n){c[e]=t}return t},x="__core-js_shared__",E=c[x]||w(x,{}),I=n(function(e){(e.exports=function(e,t){return E[e]||(E[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.1",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})}),O={}.hasOwnProperty,S=function(e,t){return O.call(e,t)},T=0,j=Math.random(),A=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++T+j).toString(36)},C={}.toString,P=function(e){return C.call(e).slice(8,-1)},L="process"==P(c.process),R=c,D=function(e){return"function"==typeof e?e:void 0},_=function(e,t){return arguments.length<2?D(R[e])||D(c[e]):R[e]&&R[e][t]||c[e]&&c[e][t]},N=_("navigator","userAgent")||"",F=c.process,M=F&&F.versions,k=M&&M.v8;k?o=(r=k.split("."))[0]+r[1]:N&&(!(r=N.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=N.match(/Chrome\/(\d+)/))&&(o=r[1]);var U=o&&+o,z=!!Object.getOwnPropertySymbols&&!a(function(){return!Symbol.sham&&(L?38===U:U>37&&U<41)}),Z=z&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,H=I("wks"),G=c.Symbol,K=Z?G:G&&G.withoutSetter||A,B=function(e){return S(H,e)&&(z||"string"==typeof H[e])||(H[e]=z&&S(G,e)?G[e]:K("Symbol."+e)),H[e]},V={};V[B("toStringTag")]="z";var q="[object z]"===String(V),$=Function.toString;"function"!=typeof E.inspectSource&&(E.inspectSource=function(e){return $.call(e)});var Y,W,X,J=E.inspectSource,Q=c.WeakMap,ee="function"==typeof Q&&/native code/.test(J(Q)),te=I("keys"),ne=function(e){return te[e]||(te[e]=A(e))},re={};if(ee){var oe=E.state||(E.state=new(0,c.WeakMap)),ie=oe.get,ce=oe.has,ae=oe.set;Y=function(e,t){return t.facade=e,ae.call(oe,e,t),t},W=function(e){return ie.call(oe,e)||{}},X=function(e){return ce.call(oe,e)}}else{var ue=ne("state");re[ue]=!0,Y=function(e,t){return t.facade=e,b(e,ue,t),t},W=function(e){return S(e,ue)?e[ue]:{}},X=function(e){return S(e,ue)}}var se={set:Y,get:W,has:X,enforce:function(e){return X(e)?W(e):Y(e,{})},getterFor:function(e){return function(t){var n;if(!s(t)||(n=W(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},fe=n(function(e){var t=se.get,n=se.enforce,r=String(String).split("String");(e.exports=function(e,t,o,i){var a,u=!!i&&!!i.unsafe,s=!!i&&!!i.enumerable,f=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof t||S(o,"name")||b(o,"name",t),(a=n(o)).source||(a.source=r.join("string"==typeof t?t:""))),e!==c?(u?!f&&e[t]&&(s=!0):delete e[t],s?e[t]=o:b(e,t,o)):s?e[t]=o:w(t,o)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||J(this)})}),le=B("toStringTag"),pe="Arguments"==P(function(){return arguments}()),de=q?P:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),le))?n:pe?P(t):"Object"==(r=P(t))&&"function"==typeof t.callee?"Arguments":r};q||fe(Object.prototype,"toString",q?{}.toString:function(){return"[object "+de(this)+"]"},{unsafe:!0});var he={}.propertyIsEnumerable,ve=Object.getOwnPropertyDescriptor,me={f:ve&&!he.call({1:2},1)?function(e){var t=ve(this,e);return!!t&&t.enumerable}:he},ye="".split,ge=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==P(e)?ye.call(e,""):Object(e)}:Object,be=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},we=function(e){return ge(be(e))},xe=Object.getOwnPropertyDescriptor,Ee={f:u?xe:function(e,t){if(e=we(e),t=v(t,!0),d)try{return xe(e,t)}catch(e){}if(S(e,t))return g(!me.f.call(e,t),e[t])}},Ie=Math.ceil,Oe=Math.floor,Se=function(e){return isNaN(e=+e)?0:(e>0?Oe:Ie)(e)},Te=Math.min,je=function(e){return e>0?Te(Se(e),9007199254740991):0},Ae=Math.max,Ce=Math.min,Pe=function(e,t){var n=Se(e);return n<0?Ae(n+t,0):Ce(n,t)},Le=function(e){return function(t,n,r){var o,i=we(t),c=je(i.length),a=Pe(r,c);if(e&&n!=n){for(;c>a;)if((o=i[a++])!=o)return!0}else for(;c>a;a++)if((e||a in i)&&i[a]===n)return e||a||0;return!e&&-1}},Re={includes:Le(!0),indexOf:Le(!1)},De=Re.indexOf,_e=function(e,t){var n,r=we(e),o=0,i=[];for(n in r)!S(re,n)&&S(r,n)&&i.push(n);for(;t.length>o;)S(r,n=t[o++])&&(~De(i,n)||i.push(n));return i},Ne=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Fe=Ne.concat("length","prototype"),Me={f:Object.getOwnPropertyNames||function(e){return _e(e,Fe)}},ke={f:Object.getOwnPropertySymbols},Ue=_("Reflect","ownKeys")||function(e){var t=Me.f(h(e)),n=ke.f;return n?t.concat(n(e)):t},ze=function(e,t){for(var n=Ue(t),r=y.f,o=Ee.f,i=0;i<n.length;i++){var c=n[i];S(e,c)||r(e,c,o(t,c))}},Ze=/#|\.prototype\./,He=function(e,t){var n=Ke[Ge(e)];return n==Ve||n!=Be&&("function"==typeof t?a(t):!!t)},Ge=He.normalize=function(e){return String(e).replace(Ze,".").toLowerCase()},Ke=He.data={},Be=He.NATIVE="N",Ve=He.POLYFILL="P",qe=He,$e=Ee.f,Ye=function(e,t){var n,r,o,i,a,u=e.target,s=e.global,f=e.stat;if(n=s?c:f?c[u]||w(u,{}):(c[u]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=$e(n,r))&&a.value:n[r],!qe(s?r:u+(f?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;ze(i,o)}(e.sham||o&&o.sham)&&b(i,"sham",!0),fe(n,r,i,e)}},We=c.Promise,Xe=y.f,Je=B("toStringTag"),Qe=function(e,t,n){e&&!S(e=n?e:e.prototype,Je)&&Xe(e,Je,{configurable:!0,value:t})},et=B("species"),tt=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},nt={},rt=B("iterator"),ot=Array.prototype,it=function(e){return void 0!==e&&(nt.Array===e||ot[rt]===e)},ct=function(e,t,n){if(tt(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},at=B("iterator"),ut=function(e){if(null!=e)return e[at]||e["@@iterator"]||nt[de(e)]},st=function(e){var t=e.return;if(void 0!==t)return h(t.call(e)).value},ft=function(e,t){this.stopped=e,this.result=t},lt=function(e,t,n){var r,o,i,c,a,u,s,f=!(!n||!n.AS_ENTRIES),l=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),d=ct(t,n&&n.that,1+f+p),v=function(e){return r&&st(r),new ft(!0,e)},m=function(e){return f?(h(e),p?d(e[0],e[1],v):d(e[0],e[1])):p?d(e,v):d(e)};if(l)r=e;else{if("function"!=typeof(o=ut(e)))throw TypeError("Target is not iterable");if(it(o)){for(i=0,c=je(e.length);c>i;i++)if((a=m(e[i]))&&a instanceof ft)return a;return new ft(!1)}r=o.call(e)}for(u=r.next;!(s=u.call(r)).done;){try{a=m(s.value)}catch(e){throw st(r),e}if("object"==typeof a&&a&&a instanceof ft)return a}return new ft(!1)},pt=B("iterator"),dt=!1;try{var ht=0,vt={next:function(){return{done:!!ht++}},return:function(){dt=!0}};vt[pt]=function(){return this},Array.from(vt,function(){throw 2})}catch(e){}var mt,yt,gt,bt=function(e,t){if(!t&&!dt)return!1;var n=!1;try{var r={};r[pt]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},wt=B("species"),xt=function(e,t){var n,r=h(e).constructor;return void 0===r||null==(n=h(r)[wt])?t:tt(n)},Et=_("document","documentElement"),It=/(iphone|ipod|ipad).*applewebkit/i.test(N),Ot=c.location,St=c.setImmediate,Tt=c.clearImmediate,jt=c.process,At=c.MessageChannel,Ct=c.Dispatch,Pt=0,Lt={},Rt=function(e){if(Lt.hasOwnProperty(e)){var t=Lt[e];delete Lt[e],t()}},Dt=function(e){return function(){Rt(e)}},_t=function(e){Rt(e.data)},Nt=function(e){c.postMessage(e+"",Ot.protocol+"//"+Ot.host)};St&&Tt||(St=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Lt[++Pt]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},mt(Pt),Pt},Tt=function(e){delete Lt[e]},L?mt=function(e){jt.nextTick(Dt(e))}:Ct&&Ct.now?mt=function(e){Ct.now(Dt(e))}:At&&!It?(gt=(yt=new At).port2,yt.port1.onmessage=_t,mt=ct(gt.postMessage,gt,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts&&Ot&&"file:"!==Ot.protocol&&!a(Nt)?(mt=Nt,c.addEventListener("message",_t,!1)):mt="onreadystatechange"in p("script")?function(e){Et.appendChild(p("script")).onreadystatechange=function(){Et.removeChild(this),Rt(e)}}:function(e){setTimeout(Dt(e),0)});var Ft,Mt,kt,Ut,zt,Zt,Ht,Gt,Kt={set:St,clear:Tt},Bt=/web0s(?!.*chrome)/i.test(N),Vt=Kt.set,qt=c.MutationObserver||c.WebKitMutationObserver,$t=c.document,Yt=c.process,Wt=c.Promise,Xt=(0,Ee.f)(c,"queueMicrotask"),Jt=Xt&&Xt.value;Jt||(Ft=function(){var e,t;for(L&&(e=Yt.domain)&&e.exit();Mt;){t=Mt.fn,Mt=Mt.next;try{t()}catch(e){throw Mt?Ut():kt=void 0,e}}kt=void 0,e&&e.enter()},It||L||Bt||!qt||!$t?Wt&&Wt.resolve?(Ht=Wt.resolve(void 0),Gt=Ht.then,Ut=function(){Gt.call(Ht,Ft)}):Ut=L?function(){Yt.nextTick(Ft)}:function(){Vt.call(c,Ft)}:(zt=!0,Zt=$t.createTextNode(""),new qt(Ft).observe(Zt,{characterData:!0}),Ut=function(){Zt.data=zt=!zt}));var Qt,en,tn,nn,rn,on=Jt||function(e){var t={fn:e,next:void 0};kt&&(kt.next=t),Mt||(Mt=t,Ut()),kt=t},cn=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=tt(t),this.reject=tt(n)},an={f:function(e){return new cn(e)}},un=function(e,t){if(h(e),s(t)&&t.constructor===e)return t;var n=an.f(e);return(0,n.resolve)(t),n.promise},sn=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},fn=Kt.set,ln=B("species"),pn="Promise",dn=se.get,hn=se.set,vn=se.getterFor(pn),mn=We,yn=c.TypeError,gn=c.document,bn=c.process,wn=_("fetch"),xn=an.f,En=xn,In=!!(gn&&gn.createEvent&&c.dispatchEvent),On="function"==typeof PromiseRejectionEvent,Sn="unhandledrejection",Tn=qe(pn,function(){if(J(mn)===String(mn)){if(66===U)return!0;if(!L&&!On)return!0}if(U>=51&&/native code/.test(mn))return!1;var e=mn.resolve(1),t=function(e){e(function(){},function(){})};return(e.constructor={})[ln]=t,!(e.then(function(){})instanceof t)}),jn=Tn||!bt(function(e){mn.all(e).catch(function(){})}),An=function(e){var t;return!(!s(e)||"function"!=typeof(t=e.then))&&t},Cn=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;on(function(){for(var r=e.value,o=1==e.state,i=0;n.length>i;){var c,a,u,s=n[i++],f=o?s.ok:s.fail,l=s.resolve,p=s.reject,d=s.domain;try{f?(o||(2===e.rejection&&Dn(e),e.rejection=1),!0===f?c=r:(d&&d.enter(),c=f(r),d&&(d.exit(),u=!0)),c===s.promise?p(yn("Promise-chain cycle")):(a=An(c))?a.call(c,l,p):l(c)):p(r)}catch(e){d&&!u&&d.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Ln(e)})}},Pn=function(e,t,n){var r,o;In?((r=gn.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!On&&(o=c["on"+e])?o(r):e===Sn&&function(e,t){var n=c.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Ln=function(e){fn.call(c,function(){var t,n=e.facade,r=e.value;if(Rn(e)&&(t=sn(function(){L?bn.emit("unhandledRejection",r,n):Pn(Sn,n,r)}),e.rejection=L||Rn(e)?2:1,t.error))throw t.value})},Rn=function(e){return 1!==e.rejection&&!e.parent},Dn=function(e){fn.call(c,function(){var t=e.facade;L?bn.emit("rejectionHandled",t):Pn("rejectionhandled",t,e.value)})},_n=function(e,t,n){return function(r){e(t,r,n)}},Nn=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Cn(e,!0))},Fn=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw yn("Promise can't be resolved itself");var r=An(t);r?on(function(){var n={done:!1};try{r.call(t,_n(Fn,n,e),_n(Nn,n,e))}catch(t){Nn(n,t,e)}}):(e.value=t,e.state=1,Cn(e,!1))}catch(t){Nn({done:!1},t,e)}}};function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Tn&&(mn=function(e){!function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect Promise invocation")}(this,mn),tt(e),Qt.call(this);var t=dn(this);try{e(_n(Fn,t),_n(Nn,t))}catch(e){Nn(t,e)}},(Qt=function(e){hn(this,{type:pn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(e,t,n){for(var r in t)fe(e,r,t[r],void 0);return e}(mn.prototype,{then:function(e,t){var n=vn(this),r=xn(xt(this,mn));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=L?bn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Cn(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),en=function(){var e=new Qt,t=dn(e);this.promise=e,this.resolve=_n(Fn,t),this.reject=_n(Nn,t)},an.f=xn=function(e){return e===mn||e===tn?new en(e):En(e)},"function"==typeof We&&(nn=We.prototype.then,fe(We.prototype,"then",function(e,t){var n=this;return new mn(function(e,t){nn.call(n,e,t)}).then(e,t)},{unsafe:!0}),"function"==typeof wn&&Ye({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return un(mn,wn.apply(c,arguments))}}))),Ye({global:!0,wrap:!0,forced:Tn},{Promise:mn}),Qe(mn,pn,!1),rn=_(pn),u&&rn&&!rn[et]&&(0,y.f)(rn,et,{configurable:!0,get:function(){return this}}),tn=_(pn),Ye({target:pn,stat:!0,forced:Tn},{reject:function(e){var t=xn(this);return t.reject.call(void 0,e),t.promise}}),Ye({target:pn,stat:!0,forced:Tn},{resolve:function(e){return un(this,e)}}),Ye({target:pn,stat:!0,forced:jn},{all:function(e){var t=this,n=xn(t),r=n.resolve,o=n.reject,i=sn(function(){var n=tt(t.resolve),i=[],c=0,a=1;lt(e,function(e){var u=c++,s=!1;i.push(void 0),a++,n.call(t,e).then(function(e){s||(s=!0,i[u]=e,--a||r(i))},o)}),--a||r(i)});return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=xn(t),r=n.reject,o=sn(function(){var o=tt(t.resolve);lt(e,function(e){o.call(t,e).then(n.resolve,r)})});return o.error&&r(o.value),n.promise}});var Un=function(e){return Object(be(e))},zn=Array.isArray||function(e){return"Array"==P(e)},Zn=B("species"),Hn=function(e,t){var n;return zn(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!zn(n.prototype)?s(n)&&null===(n=n[Zn])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Gn=[].push,Kn=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,c=7==e,a=5==e||i;return function(u,s,f,l){for(var p,d,h=Un(u),v=ge(h),m=ct(s,f,3),y=je(v.length),g=0,b=l||Hn,w=t?b(u,y):n||c?b(u,0):void 0;y>g;g++)if((a||g in v)&&(d=m(p=v[g],g,h),e))if(t)w[g]=d;else if(d)switch(e){case 3:return!0;case 5:return p;case 6:return g;case 2:Gn.call(w,p)}else switch(e){case 4:return!1;case 7:Gn.call(w,p)}return i?-1:r||o?o:w}},Bn={forEach:Kn(0),map:Kn(1),filter:Kn(2),some:Kn(3),every:Kn(4),find:Kn(5),findIndex:Kn(6),filterOut:Kn(7)},Vn=B("species"),qn=function(e){return U>=51||!a(function(){var t=[];return(t.constructor={})[Vn]=function(){return{foo:1}},1!==t[e](Boolean).foo})},$n=Bn.map;Ye({target:"Array",proto:!0,forced:!qn("map")},{map:function(e){return $n(this,e,arguments.length>1?arguments[1]:void 0)}});var Yn=Object.keys||function(e){return _e(e,Ne)},Wn=Object.assign,Xn=Object.defineProperty,Jn=!Wn||a(function(){if(u&&1!==Wn({b:1},Wn(Xn({},"a",{enumerable:!0,get:function(){Xn(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=Wn({},e)[n]||Yn(Wn({},t)).join("")!=r})?function(e,t){for(var n=Un(e),r=arguments.length,o=1,i=ke.f,c=me.f;r>o;)for(var a,s=ge(arguments[o++]),f=i?Yn(s).concat(i(s)):Yn(s),l=f.length,p=0;l>p;)a=f[p++],u&&!c.call(s,a)||(n[a]=s[a]);return n}:Wn;Ye({target:"Object",stat:!0,forced:Object.assign!==Jn},{assign:Jn});var Qn=function(){var e=h(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function er(e,t){return RegExp(e,t)}var tr,nr,rr={UNSUPPORTED_Y:a(function(){var e=er("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),BROKEN_CARET:a(function(){var e=er("^r","gy");return e.lastIndex=2,null!=e.exec("str")})},or=RegExp.prototype.exec,ir=String.prototype.replace,cr=or,ar=(nr=/b*/g,or.call(tr=/a/,"a"),or.call(nr,"a"),0!==tr.lastIndex||0!==nr.lastIndex),ur=rr.UNSUPPORTED_Y||rr.BROKEN_CARET,sr=void 0!==/()??/.exec("")[1];(ar||sr||ur)&&(cr=function(e){var t,n,r,o,i=this,c=ur&&i.sticky,a=Qn.call(i),u=i.source,s=0,f=e;return c&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),f=String(e).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(u="(?: "+u+")",f=" "+f,s++),n=new RegExp("^(?:"+u+")",a)),sr&&(n=new RegExp("^"+u+"$(?!\\s)",a)),ar&&(t=i.lastIndex),r=or.call(c?n:i,f),c?r?(r.input=r.input.slice(s),r[0]=r[0].slice(s),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:ar&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),sr&&r&&r.length>1&&ir.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});var fr=cr;Ye({target:"RegExp",proto:!0,forced:/./.exec!==fr},{exec:fr});var lr=B("species"),pr=!a(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),dr="$0"==="a".replace(/./,"$0"),hr=B("replace"),vr=!!/./[hr]&&""===/./[hr]("a","$0"),mr=!a(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),yr=function(e,t,n,r){var o=B(e),i=!a(function(){var t={};return t[o]=function(){return 7},7!=""[e](t)}),c=i&&!a(function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[lr]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t});if(!i||!c||"replace"===e&&(!pr||!dr||vr)||"split"===e&&!mr){var u=/./[o],s=n(o,""[e],function(e,t,n,r,o){return t.exec===fr?i&&!o?{done:!0,value:u.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}},{REPLACE_KEEPS_$0:dr,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:vr}),f=s[1];fe(String.prototype,e,s[0]),fe(RegExp.prototype,o,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)})}r&&b(RegExp.prototype[o],"sham",!0)},gr=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},br=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==P(e))throw TypeError("RegExp#exec called on incompatible receiver");return fr.call(e,t)};yr("search",1,function(e,t,n){return[function(t){var n=be(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=h(e),i=String(this),c=o.lastIndex;gr(c,0)||(o.lastIndex=0);var a=br(o,i);return gr(o.lastIndex,c)||(o.lastIndex=c),null===a?-1:a.index}]});var wr=me.f,xr=function(e){return function(t){for(var n,r=we(t),o=Yn(r),i=o.length,c=0,a=[];i>c;)n=o[c++],u&&!wr.call(r,n)||a.push(e?[n,r[n]]:r[n]);return a}},Er=[xr(!0),xr(!1)][0];Ye({target:"Object",stat:!0},{entries:function(e){return Er(e)}});var Ir=Bn.filter;Ye({target:"Array",proto:!0,forced:!qn("filter")},{filter:function(e){return Ir(this,e,arguments.length>1?arguments[1]:void 0)}}),self.fetch||(self.fetch=function(e,t){return t=t||{},new Promise(function(n,r){var o=new XMLHttpRequest,i=[],c=[],a={},u=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:u,headers:{keys:function(){return i},entries:function(){return c},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var s in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){i.push(t=t.toLowerCase()),c.push([t,n]),a[t]=a[t]?a[t]+","+n:n}),n(u())},o.onerror=r,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(s,t.headers[s]);o.send(t.body||null)})});var Or,Sr=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return h(n),function(e){if(!s(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Tr=function(e,t,n){var r,o;return Sr&&"function"==typeof(r=t.constructor)&&r!==n&&s(o=r.prototype)&&o!==n.prototype&&Sr(e,o),e},jr=u?Object.defineProperties:function(e,t){h(e);for(var n,r=Yn(t),o=r.length,i=0;o>i;)y.f(e,n=r[i++],t[n]);return e},Ar=ne("IE_PROTO"),Cr=function(){},Pr=function(e){return"<script>"+e+"<\/script>"},Lr=function(){try{Or=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;Lr=Or?function(e){e.write(Pr("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Or):((t=p("iframe")).style.display="none",Et.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Pr("document.F=Object")),e.close(),e.F);for(var n=Ne.length;n--;)delete Lr.prototype[Ne[n]];return Lr()};re[Ar]=!0;var Rr=Object.create||function(e,t){var n;return null!==e?(Cr.prototype=h(e),n=new Cr,Cr.prototype=null,n[Ar]=e):n=Lr(),void 0===t?n:jr(n,t)},Dr="\t\n\v\f\r                　\u2028\u2029\ufeff",_r="["+Dr+"]",Nr=RegExp("^"+_r+_r+"*"),Fr=RegExp(_r+_r+"*$"),Mr=function(e){return function(t){var n=String(be(t));return 1&e&&(n=n.replace(Nr,"")),2&e&&(n=n.replace(Fr,"")),n}},kr={start:Mr(1),end:Mr(2),trim:Mr(3)},Ur=Me.f,zr=Ee.f,Zr=y.f,Hr=kr.trim,Gr="Number",Kr=c.Number,Br=Kr.prototype,Vr=P(Rr(Br))==Gr,qr=function(e){var t,n,r,o,i,c,a,u,s=v(e,!1);if("string"==typeof s&&s.length>2)if(43===(t=(s=Hr(s)).charCodeAt(0))||45===t){if(88===(n=s.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+s}for(c=(i=s.slice(2)).length,a=0;a<c;a++)if((u=i.charCodeAt(a))<48||u>o)return NaN;return parseInt(i,r)}return+s};if(qe(Gr,!Kr(" 0o1")||!Kr("0b1")||Kr("+0x1"))){for(var $r,Yr=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof Yr&&(Vr?a(function(){Br.valueOf.call(n)}):P(n)!=Gr)?Tr(new Kr(qr(t)),n,Yr):qr(t)},Wr=u?Ur(Kr):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Xr=0;Wr.length>Xr;Xr++)S(Kr,$r=Wr[Xr])&&!S(Yr,$r)&&Zr(Yr,$r,zr(Kr,$r));Yr.prototype=Br,Br.constructor=Yr,fe(c,Gr,Yr)}var Jr=kr.trim;Ye({target:"String",proto:!0,forced:a(function(){return!!Dr.trim()||"​᠎"!="​᠎".trim()||"trim"!==Dr.trim.name})},{trim:function(){return Jr(this)}});var Qr=function(e,t,n,r,o,i,c,a){for(var u,s=o,f=0,l=!!c&&ct(c,a,3);f<r;){if(f in n){if(u=l?l(n[f],f,t):n[f],i>0&&zn(u))s=Qr(e,t,u,je(u.length),s,i-1)-1;else{if(s>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[s]=u}s++}f++}return s},eo=Qr;Ye({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=Un(this),n=je(t.length),r=Hn(t,0);return r.length=eo(r,t,t,n,0,void 0===e?1:Se(e)),r}});var to=B("unscopables"),no=Array.prototype;null==no[to]&&y.f(no,to,{configurable:!0,value:Rr(null)});var ro=function(e){no[to][e]=!0};ro("flat");var oo={transform:{concat:function(e){return e.map(function(e){return co(e)})},form:function(e){return{type:"Form",formId:e}},paymentForm:function(e){return{type:"PaymentForm",formId:e}},resource:function(e){return{type:"UIComponent",componentId:e}},parameterisedResource:function(e){return{type:"UIComponent",componentId:e}},url:function(e){return{type:"HostedUIComponent",url:e}},componentTemplate:function(e){return{type:"ComponentTemplate",componentId:e}},parameterisedComponentTemplate:function(e){return{type:"ComponentTemplate",componentId:e}},truncate:function(e){return{type:"Truncate",truncateLength:Number(e),style:"nostyle"}},truncateWithStyle:function(e,t){return{type:"Truncate",truncateLength:Number(e),style:t}},outcomeTracker:function(e,t,n,r){return{type:"OutcomeTracker",featureId:e,featureLabel:t,outcomeId:n,outcomeLabel:r}},remove:function(){return{type:"Remove"}}}},io={type:"LeavePristine"},co=function(e){var t=e.trim().length?e:"blaize.transform.remove()";return new Function("blaize,leave_pristine",'"use strict";return ('+t+");")(oo,io)},ao=function(e){return[co(e)].flat()},uo=B("match"),so=function(e){var t;return s(e)&&(void 0!==(t=e[uo])?!!t:"RegExp"==P(e))},fo=function(e){return function(t,n){var r,o,i=String(be(t)),c=Se(n),a=i.length;return c<0||c>=a?e?"":void 0:(r=i.charCodeAt(c))<55296||r>56319||c+1===a||(o=i.charCodeAt(c+1))<56320||o>57343?e?i.charAt(c):r:e?i.slice(c,c+2):o-56320+(r-55296<<10)+65536}},lo={codeAt:fo(!1),charAt:fo(!0)},po=lo.charAt,ho=function(e,t,n){return t+(n?po(e,t).length:1)},vo=[].push,mo=Math.min,yo=4294967295,go=!a(function(){return!RegExp(yo,"y")});yr("split",2,function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(be(this)),o=void 0===n?yo:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!so(e))return t.call(r,e,o);for(var i,c,a,u=[],s=0,f=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(i=fr.call(f,r))&&!((c=f.lastIndex)>s&&(u.push(r.slice(s,i.index)),i.length>1&&i.index<r.length&&vo.apply(u,i.slice(1)),a=i[0].length,s=c,u.length>=o));)f.lastIndex===i.index&&f.lastIndex++;return s===r.length?!a&&f.test("")||u.push(""):u.push(r.slice(s)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=be(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,n):r.call(String(o),t,n)},function(e,o){var i=n(r,e,this,o,r!==t);if(i.done)return i.value;var c=h(e),a=String(this),u=xt(c,RegExp),s=c.unicode,f=new u(go?c:"^(?:"+c.source+")",(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(go?"y":"g")),l=void 0===o?yo:o>>>0;if(0===l)return[];if(0===a.length)return null===br(f,a)?[a]:[];for(var p=0,d=0,v=[];d<a.length;){f.lastIndex=go?d:0;var m,y=br(f,go?a:a.slice(d));if(null===y||(m=mo(je(f.lastIndex+(go?0:d)),a.length))===p)d=ho(a,d,s);else{if(v.push(a.slice(p,d)),v.length===l)return v;for(var g=1;g<=y.length-1;g++)if(v.push(y[g]),v.length===l)return v;d=p=m}}return v.push(a.slice(p)),v}]},!go);var bo=function(e,t,n){var r=v(t);r in e?y.f(e,r,g(0,n)):e[r]=n},wo=qn("slice"),xo=B("species"),Eo=[].slice,Io=Math.max;Ye({target:"Array",proto:!0,forced:!wo},{slice:function(e,t){var n,r,o,i=we(this),c=je(i.length),a=Pe(e,c),u=Pe(void 0===t?c:t,c);if(zn(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!zn(n.prototype)?s(n)&&null===(n=n[xo])&&(n=void 0):n=void 0,n===Array||void 0===n))return Eo.call(i,a,u);for(r=new(void 0===n?Array:n)(Io(u-a,0)),o=0;a<u;a++,o++)a in i&&bo(r,o,i[a]);return r.length=o,r}});var Oo=function(e,t){var n=[][e];return!!n&&a(function(){n.call(null,t||function(){throw 1},1)})},So=Math.min,To=[].lastIndexOf,jo=!!To&&1/[1].lastIndexOf(1,-0)<0,Ao=Oo("lastIndexOf"),Co=jo||!Ao?function(e){if(jo)return To.apply(this,arguments)||0;var t=we(this),n=je(t.length),r=n-1;for(arguments.length>1&&(r=So(r,Se(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:To;Ye({target:"Array",proto:!0,forced:Co!==[].lastIndexOf},{lastIndexOf:Co});var Po=Re.includes;Ye({target:"Array",proto:!0},{includes:function(e){return Po(this,e,arguments.length>1?arguments[1]:void 0)}}),ro("includes");var Lo=function(e){if(so(e))throw TypeError("The method doesn't accept regular expressions");return e},Ro=B("match");Ye({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./".includes(t)}catch(e){try{return t[Ro]=!1,"/./".includes(t)}catch(e){}}return!1}()},{includes:function(e){return!!~String(be(this)).indexOf(Lo(e),arguments.length>1?arguments[1]:void 0)}});var Do=B("isConcatSpreadable"),_o=9007199254740991,No="Maximum allowed index exceeded",Fo=U>=51||!a(function(){var e=[];return e[Do]=!1,e.concat()[0]!==e}),Mo=qn("concat"),ko=function(e){if(!s(e))return!1;var t=e[Do];return void 0!==t?!!t:zn(e)};Ye({target:"Array",proto:!0,forced:!Fo||!Mo},{concat:function(e){var t,n,r,o,i,c=Un(this),a=Hn(c,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(ko(i=-1===t?c:arguments[t])){if(u+(o=je(i.length))>_o)throw TypeError(No);for(n=0;n<o;n++,u++)n in i&&bo(a,u,i[n])}else{if(u>=_o)throw TypeError(No);bo(a,u++,i)}return a.length=u,a}});var Uo=function(e,t,n,r){try{return r?t(h(n)[0],n[1]):t(n)}catch(t){throw st(e),t}};Ye({target:"Array",stat:!0,forced:!bt(function(e){Array.from(e)})},{from:function(e){var t,n,r,o,i,c,a=Un(e),u="function"==typeof this?this:Array,s=arguments.length,f=s>1?arguments[1]:void 0,l=void 0!==f,p=ut(a),d=0;if(l&&(f=ct(f,s>2?arguments[2]:void 0,2)),null==p||u==Array&&it(p))for(n=new u(t=je(a.length));t>d;d++)c=l?f(a[d],d):a[d],bo(n,d,c);else for(i=(o=p.call(a)).next,n=new u;!(r=i.call(o)).done;d++)c=l?Uo(o,f,[r.value,d],!0):r.value,bo(n,d,c);return n.length=d,n}});var zo,Zo,Ho,Go=!a(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Ko=ne("IE_PROTO"),Bo=Object.prototype,Vo=Go?Object.getPrototypeOf:function(e){return e=Un(e),S(e,Ko)?e[Ko]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Bo:null},qo=B("iterator"),$o=!1;[].keys&&("next"in(Ho=[].keys())?(Zo=Vo(Vo(Ho)))!==Object.prototype&&(zo=Zo):$o=!0);var Yo=null==zo||a(function(){var e={};return zo[qo].call(e)!==e});Yo&&(zo={}),S(zo,qo)||b(zo,qo,function(){return this});var Wo={IteratorPrototype:zo,BUGGY_SAFARI_ITERATORS:$o},Xo=Wo.IteratorPrototype,Jo=function(){return this},Qo=Wo.IteratorPrototype,ei=Wo.BUGGY_SAFARI_ITERATORS,ti=B("iterator"),ni=function(){return this},ri=lo.charAt,oi="String Iterator",ii=se.set,ci=se.getterFor(oi);!function(e,t,n,r,o,i,c){!function(e,t,n){var r="String Iterator";e.prototype=Rr(Xo,{next:g(1,function(){var e,t=ci(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=ri(n,r),t.index+=e.length,{value:e,done:!1})})}),Qe(e,r,!1),nt[r]=Jo}(n);var a,u,s=e.prototype,f=s[ti]||s["@@iterator"]||o,l=!ei&&f||(u=o,l||(!ei&&u in s?s[u]:function(){return new n(this)}));f&&(a=Vo(f.call(new e)),Qo!==Object.prototype&&a.next&&(Vo(a)!==Qo&&(Sr?Sr(a,Qo):"function"!=typeof a[ti]&&b(a,ti,ni)),Qe(a,"String Iterator",!0))),s[ti]!==l&&b(s,ti,l),nt.String=l}(String,0,function(e){ii(this,{type:oi,string:String(e),index:0})});var ai=Bn.forEach,ui=Oo("forEach")?[].forEach:function(e){return ai(this,e,arguments.length>1?arguments[1]:void 0)};for(var si in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var fi=c[si],li=fi&&fi.prototype;if(li&&li.forEach!==ui)try{b(li,"forEach",ui)}catch(e){li.forEach=ui}}var pi=Re.indexOf,di=[].indexOf,hi=!!di&&1/[1].indexOf(1,-0)<0,vi=Oo("indexOf");Ye({target:"Array",proto:!0,forced:hi||!vi},{indexOf:function(e){return hi?di.apply(this,arguments)||0:pi(this,e,arguments.length>1?arguments[1]:void 0)}});var mi=function(e){return-1!==e.search(">[^<>]+<")},yi=function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=[].concat(Array.from(t.head.children),Array.from(t.body.children));if(!n.length)return document.createTextNode(e);var r=document.createDocumentFragment();return n.forEach(function(e){return r.appendChild(e)}),gi(r),r},gi=function(e){var t=e.querySelectorAll("script");t.length&&Array.from(t).map(function(e){var t=document.createElement("script");Array.from(e.attributes).forEach(function(e){t.setAttribute(e.name,e.value)}),t.innerHTML=e.innerHTML,e.parentNode.appendChild(t),e.parentNode.removeChild(e)})},bi=function(e,t,n){void 0===n&&(n={}),e.forEach(function(e){var r=e.parentNode,o=Array.from(r.children).indexOf(e),i=r.removeChild(e),c=t.map(function(e){return function(e,t,n){switch(t.type){case"LeavePristine":return e;case"Truncate":return function(e,t){var n=2*t.truncateLength,r=e.outerHTML.trim().split(/\s+/);if(t.truncateLength>=r.length)return e;for(var o,i=0,c=!1,a=0,u=0,s=kn(r);!(o=s()).done;){var f=o.value;u++;var l=c,p=f.lastIndexOf("<"),d=f.lastIndexOf(">");if(p>=0&&(c=!0),d>=0&&(c=!1),-1!==p&&-1!==d&&p>d&&(c=!0),l&&d===f.length-1&&!mi(f)||0===p&&d===f.length-1)c=!1;else if(!c){if(i>0)break;(++a>=t.truncateLength&&f.includes(".")||a==n)&&(i=u)}}if(u===r.length)return e;var h=r.slice(0,u=i>0?i:u).join(" ");a===n&&(h+="...\n");var v,m=(new DOMParser).parseFromString(h,"text/html").body.children[0];switch(t.style){case"fadeout":var y=document.createElement("div");y.style.position="absolute",y.style.height="100%",y.style.width="100%",y.style.bottom=0,y.style.backgroundImage="linear-gradient(0deg, #fff 0%, rgba(255, 255, 255, 0) 100%)",m.appendChild(y),(v=document.createElement("div")).style.position="relative",v.appendChild(m);break;case"linebreak":var g=document.createElement("hr");g.style.border="1px solid #ebebeb",m.appendChild(g),v=m;break;default:v=m}return v}(e,t);case"OutcomeTracker":!function(e){window.Zephr||(window.Zephr={}),window.Zephr.outcomes||(window.Zephr.outcomes={}),window.Zephr.outcomes[e.featureId]={featureLabel:e.featureLabel,outcomeId:e.outcomeId,outcomeLabel:e.outcomeLabel}}(t);break;case"Form":return function(e,t){if(t.forms&&t.forms[e.formId])return yi(t.forms[e.formId]);console.error("Form not found.")}(t,n);case"PaymentForm":return function(e,t){if(t.paymentForms&&t.paymentForms[e.formId])return yi(t.paymentForms[e.formId]);console.error("Payment form not found.")}(t,n);case"UIComponent":return function(e,t){if(t.uiComponents&&t.uiComponents[e.componentId])return yi(t.uiComponents[e.componentId]);console.error("UI component not found.")}(t,n);case"HostedUIComponent":return function(e,t){if(t.hostedUiComponents&&t.hostedUiComponents[e.url])return yi(t.hostedUiComponents[e.url]);console.error("Hosted UI component not found.")}(t,n);case"ComponentTemplate":return function(e,t){if(t.componentTemplates&&t.componentTemplates[e.componentId])return yi(t.componentTemplates[e.componentId]);console.error("Component template not found.")}(t,n);case"Remove":break;default:console.error("No matching outcome type "+t.type)}}(i,e,n)}).filter(Boolean),a=document.createDocumentFragment();c.forEach(function(e){return a.appendChild(e)}),o<r.children.length?r.insertBefore(a,r.children[o]):r.appendChild(a)})};Ye({target:"Object",stat:!0,forced:a(function(){Yn(1)})},{keys:function(e){return Yn(Un(e))}});var wi=function(e){var t;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t};function xi(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var Ei=function(){function e(e){this.cdnApi=e||""}var t=e.prototype;return t.fetchLiveFeatures=function(){try{var e=this;return Promise.resolve(xi(function(){return Promise.resolve(fetch(e.cdnApi+"/zephr/features").then(function(e){return e.json()}))},function(){return Promise.reject(new Error("Live features endpoint failed."))}))}catch(e){return Promise.reject(e)}},t.fetchDecisions=function(e,t){var n=void 0===t?{customData:{}}:t,r=n.jwt,o=n.customData,i=void 0===o?{}:o;try{var c=this,a=e.map(function(e){return e.id});return Promise.resolve(xi(function(){return Promise.resolve(fetch(c.cdnApi+"/zephr/feature-decisions",{method:"POST",credentials:"include",headers:Object.assign({"Content-Type":"application/json",Accept:"application/json"},r&&{Authorization:"Bearer "+r}),body:JSON.stringify({path:document.location.pathname+document.location.search+document.location.hash,referer:document.referrer,featureIds:a,customData:i})}).then(function(e){return e.json()}))},function(){return Promise.reject(new Error("Feature decisions endpoint failed."))}))}catch(e){return Promise.reject(e)}},t.executeDecisions=function(e,t,n){for(var r,o=kn(e);!(r=o()).done;){var i=r.value,c=(t.featureResults||{})[i.id];if(c){var a=ao(c),u=this.selectFeatureNodes(i);bi(u,a,t.resources||{})}}t.accessDetails&&(window.Zephr||(window.Zephr={}),window.Zephr.accessDetails?window.Zephr.accessDetails=this._mergeAccessDetails(window.Zephr.accessDetails,t.accessDetails):window.Zephr.accessDetails=t.accessDetails),n&&function(e){var t=e.datalayerName;t in window||(window[t]=[]);var n={},r=[];e.includeOutcomes&&window.Zephr.outcomes&&(n.zephrOutcomes=window.Zephr.outcomes,e.outcomesAsEvents&&Object.keys(window.Zephr.outcomes||[]).forEach(function(e){var t={event:"zephr-outcome-"+e,featureId:e,featureLabel:window.Zephr.outcomes[e].featureLabel,outcomeId:window.Zephr.outcomes[e].outcomeId,outcomeLabel:window.Zephr.outcomes[e].outcomeLabel};r.push(t)})),window.Zephr&&window.Zephr.accessDetails&&(Object.keys(window.Zephr.accessDetails.trials||{}).forEach(function(t){var r=window.Zephr.accessDetails.trials[t];if(r.reportInDataLayer){var o=r.totalCredits-r.remainingCredits;e.groupFields&&!n.zephrTrials&&(n.zephrTrials={});var i=e.groupFields?n.zephrTrials:n;r.dataLayerCreditsUsedKey&&(i[r.dataLayerCreditsUsedKey]=o),r.dataLayerCreditsRemainingKey&&(i[r.dataLayerCreditsRemainingKey]=r.remainingCredits)}}),(window.Zephr.accessDetails.trialTrackingDetails||[]).forEach(function(t){var r=(window.Zephr.accessDetails["credits"===t.entitlementType?"credits":"meters"]||{})[t.entitlementId];r&&(e.groupFields&&!n.zephrTrials&&(n.zephrTrials={}),t.creditsRemainingKey&&(e.groupFields?n.zephrTrials[t.creditsRemainingKey]=r.remainingCredits:n[t.creditsRemainingKey]=r.remainingCredits),t.creditsUsedKey&&(e.groupFields?n.zephrTrials[t.creditsUsedKey]=r.totalCredits-r.remainingCredits:n[t.creditsUsedKey]=r.totalCredits-r.remainingCredits))})),Object.keys(n).length&&(n.event="zephr-pageview",r.unshift(n)),r.length&&(r.forEach(function(e){window[t].push(e)}),document.dispatchEvent(wi("zephr.dataLayerReady")))}(n)},t._mergeAccessDetails=function(e,t){var n,r;return Object.assign({},e,t,{authenticated:t.authenticated,accessDecisions:Object.assign({},e.accessDecisions,t.accessDecisions),entitlements:this._mergeCreditData(e.entitlements,t.entitlements),credits:this._mergeCreditData(e.credits,t.credits),meters:this._mergeCreditData(e.meters,t.meters),trials:this._mergeCreditData(null!=(n=e.trials)?n:{},null!=(r=t.trials)?r:{})})},t._mergeCreditData=function(e,t){for(var n=Object.assign({},e,t),r=0,o=Object.entries(e);r<o.length;r++){var i=o[r],c=i[0],a=i[1],u=t[c];if(u){var s=n[c];this._eitherHasProperty(a,u,"decrementedInDecision")&&(s.decrementedInDecision=!(!a.decrementedInDecision&&!u.decrementedInDecision)),this._eitherHasProperty(a,u,"usedInDecision")&&(s.usedInDecision=!(!a.usedInDecision&&!u.usedInDecision)),this._eitherHasProperty(a,u,"remainingCredits")&&(s.remainingCredits=this._minOrNumber(a.remainingCredits,u.remainingCredits)),this._eitherHasProperty(a,u,"totalCredits")&&(s.totalCredits=this._minOrNumber(a.totalCredits,u.totalCredits))}}return n},t._eitherHasProperty=function(e,t,n){return e&&e.hasOwnProperty(n)||t&&t.hasOwnProperty(n)},t._minOrNumber=function(e,t){var n="number"==typeof e,r="number"==typeof t;return n&&r?Math.min(e,t):n?e:r?t:void 0},t.findFeatures=function(e){return Array.isArray(e)&&e.length?e.filter(function(e){return"COMMENT_TAG"!==e.targetType&&null!==document.querySelector(e.cssSelector)}):[]},t.selectFeatureNodes=function(e){return document.querySelectorAll(e.cssSelector)},e}(),Ii=function(e){return new Ei(e)};e.createInstance=Ii,e.run=function(e){try{var t="",n={};"string"==typeof e?t=e:"object"==typeof e&&(n=e,t=e.cdnApi||"");var r=Ii(t);return Promise.resolve(r.fetchLiveFeatures()).then(function(e){function t(){return document.dispatchEvent(wi("zephr.browserDecisionsFinished")),r}var o,i;Array.isArray(e)?o=e:(o=e.features,i=e.datalayerOutcomesConfig),console.log("Live Features:",o);var c=r.findFeatures(o),a=function(){if(c.length)return console.log("Features on page:",c),Promise.resolve(r.fetchDecisions(c,n)).then(function(e){console.log("Decisions:",e),r.executeDecisions(c,e,i)});console.log("No features found on page.")}();return a&&a.then?a.then(t):t()})}catch(e){return Promise.reject(e)}}});
